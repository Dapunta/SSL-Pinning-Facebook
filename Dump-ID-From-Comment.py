import requests, json, uuid, base64

def DumpComment(post_id:str, token:str, cursor=None):
    limit = 100
    r     = requests.Session()
    var   = {"use_msys_for_composer_flow":False,"skip_playlist_field":False,"skip_groups_unused_fields":False,"show_title_in_titlebar":False,"paginationPK":str(base64.b64encode(('feedback:{}'.format(post_id)).encode('utf-8')).decode('utf-8')),"should_show_presence_indicator":False,"should_include_story_metadata":False,"should_include_location_metadata":False,"should_include_future_of_feed_info":False,"should_include_friend_metadata":False,"should_fetch_recipient_suggestions_action":False,"should_fetch_eligibility_for_x_app_follows":False,"remove_viewer_feedback_reaction_info_field":False,"remove_dead_field":False,"local_scroll_speed":0,"include_stars_banner_overlay":False,"include_image_preview_payload":False,"include_dm_ad_halo_data":True,"fetch_profile_pic_expiration_information":False,"fetch_cix_screen_nt_payload":False,"should_defer_field":False,"fetch_actors_count":10,"enable_social_context_label":False,"enable_reply_to_author":False,"comments_paginating_at_stream_use_customized_batch":False,"should_fetch_page_private_reply_delegate_page_id":False,"comments_paginating_at_stream_initial_count":7,"skip_fetching_non_colocated_comment_fragments":False,"skip_fetching_top_level_comments":False,"should_fetch_nme_user_signals":False,"comment_scenario":"FB4A_FLYOUT_SCENARIO_V1","use_comment_mfm_for_interesting_reply":False,"subreplies_level_comments_paginating_at_stream_initial_count":1,"enable_additional_profiles_comment_composer_hint":False,"subreplies_level_comments_paginating_at_stream_enabled":False,"subreplies_level_comments_paginating_first":None,"reply_level_comments_paginating_at_stream_use_customized_batch":False,"reply_level_comments_paginating_first":1,"reply_level_comments_paginating_after_cursor":None,"top_level_comments_paginating_at_stream_use_customized_batch":True,"reply_level_comments_paginating_last":None,"should_fetch_seen_state":False,"top_level_comments_paginating_first":limit,"subreplies_level_comments_paginating_last":None,"video_channel_id":None,"ttrc_instance_id":str(uuid.uuid4()),"skip_work_info_fields":True,"should_fetch_story_header_control_data":False,"skip_story_promotions_info":False,"skip_attachments":False,"show_profiles_for_seen":False,"should_prefetch_comments_in_fb_shorts":False,"should_include_stars_vod_ticker":False,"should_include_rate_limit_transparancy_fields":True,"should_include_privacy_targeting":False,"comments_paginating_at_stream_enabled":False,"fetch_comment_rendering_instance":False,"should_include_group_in_sound_sticker_attachment":True,"should_include_group_comment_slowdown_fields":True,"should_include_friend_watch_count":False,"strip_notif_story":False,"should_include_cix_nt_presentation":False,"should_fetch_video_preview":False,"should_show_stars_attachment_button":True,"should_fetch_story_field":False,"should_use_has_comments":False,"in_channel_eligibility_experiment":False,"should_fetch_reshare_filter_metadata":False,"enable_pinned_by_admin":False,"should_fetch_notif_token":False,"should_fetch_is_reshareable_with_filter":False,"should_fetch_interesting_top_level_comments":False,"fetch_comment_intent":True,"enable_commerce_message_ufi_action":False,"should_fetch_estimated_viewer_count":False,"should_defer_nfa":False,"should_defer_fetch_reels_ads":True,"enable_cix_screen_rollout":False,"fetch_remix_feedback_metadata":True,"referral_source_augment_profile_id":None,"fetch_contextual_profile_group_id":False,"non_member_group_id":"","should_fetch_group_anonymous_post_info":True,"is_sound_sticker_comment_enabled":True,"skip_top_level_comments_count":False,"msqrd_supported_capabilities":[],"inline_text_delight_comment_enabled":False,"inline_replies_count":1,"defer_secondary_actions":True,"enable_comment_private_reply":False,"include_target_group_info":True,"enable_composer_hint_plugins":True,"include_surround_comment_ntview":False,"enable_comment_shares":True,"include_shareable_url":False,"should_fetch_wem_private_sharing_params":False,"session_scroll_speed":0,"include_rex_count":False,"include_ranking_signals":False,"include_predicted_feed_topics":False,"enable_download":False,"include_owning_profile_metadata":False,"enable_target_media_feedback_important_reactors":True,"include_local_community_info":False,"include_inform_treatment":False,"skip_comment_reply_nodes":False,"use_default_actor":True,"should_include_fishbowl_pre_comment_navigation":False,"include_restriction_notice":True,"include_image_ranges":False,"comment_replies_order":["RANKED_SUB_REPLIES"],"include_ama_feedback_fields":False,"icon_scale":1,"should_fetch_container_story":False,"hoisted_comments":[],"include_award_cvd_in_bling_string":False,"fishbowl_inline_comment_ordering_navigation_enabled":False,"fetch_watch_topic_info":False,"fetch_video_title_from_media":False,"website_preview_enabled":False,"fetch_privacy_value_for_declined_comment":True,"enable_quick_hide_comment":True,"is_music_comment_enabled":True,"fetch_messenger_contact":False,"should_include_friend_actions":False,"fetch_facts":False,"show_comment_insights_in_permalink":False,"network_latency_quality":"excellent","fetch_fields_for_entity_bundle_controls":False,"fetch_comment_education":True,"disable_structured_reporting":False,"should_fetch_thread_info_for_community_chats":False,"should_fetch_full_relevant_comments":True,"should_fetch_eligible_for_comment_sheet":False,"skip_group_fields":True,"feedback_source":"NEWS_FEED","subreplies_level_comments_paginating_before_cursor":None,"feedback_reactions_floating_effect":False,"should_include_comment_batch_like_nux":True,"fb_shorts_group_author_picture_size":110,"should_include_early_access_comment_composer_banner":True,"enable_soft_removal_bottomsheet_plugins":False,"enable_comment_covers":True,"use_performant_inline_follow_check":False,"should_fetch_interactive_plugins":False,"enable_receiving_private_reply":False,"enable_mute_unmute_cvd_optimization":False,"remove_attachment_feedback":False,"should_fetch_award_attachment":False,"query_for_can_be_invited_by_viewer":False,"enable_important_reactors":True,"enable_hide_unhide_bottomsheet_plugins":False,"fetch_fbc_header":False,"enable_comment_reply_bottomsheet_plugins":False,"enable_copy_text_bottomsheet_plugins":False,"enable_community_awards_bling_string":False,"group_id_list":[],"automatic_photo_captioning_enabled":False,"reply_level_comments_paginating_at_stream_initial_count":1,"enable_comment_voting":False,"enable_comment_reputation_system_community_awards":False,"include_social_context":True,"request_meetup_all_members":True,"should_use_json_tree":False,"enable_private_reply":True,"fetch_presence_eligible":True,"enable_ban_author_bottomsheet_plugins":False,"is_audio_comment_enabled":False,"dont_fetch_video_social_context":False,"augment_type_name":None,"feedback_referrer":"tap_bling_bar_comment","feedback_include_cv_related_posts_count":False,"ar_effect_capabilities":[],"should_fetch_is_ppc":False,"place_list_max_count":50,"network_bandwidth_quality":"excellent","ad_id":None,"should_fetch_delegate_page_id":False,"enable_delete_comment_bottomsheet_plugins":False,"subreplies_level_comments_paginating_at_stream_use_customized_batch":False,"contextual_profile_context":None,"story_url_format":"mobile","top_level_comment_ordering_mode":"RANKED_UNFILTERED","image_low_height":2048,"reading_attachment_profile_image_height":135,"include_ban_block_fields_for_pplus":False,"remove_unused_graphql_fields_group_composer_traits":False,"disable_goodwill_from_comments":True,"supported_compression_types":["NONE","ZIP"],"reply_level_comments_paginating_at_stream_enabled":False,"news_feed_only":False,"should_fetch_adaptive_ufi":False,"enable_priority_comment":False,"fetch_comment_inline_survey":False,"bloks_version":None,"include_cix_screen":False,"dont_load_templates":True,"include_comments_disabled_fields":False,"should_fetch_comment_explanation_footer_string":True,"skip_sample_entities_fields":False,"supported_model_compression_types":["NONE"],"device_key":"","image_medium_width":270,"inline_text_bolding_comment_enabled":False,"nt_context":{"bloks_version":"c3cc18230235472b54176a5922f9b91d291342c3a276e2644dbdb9760b96deec","is_push_on":True,"pixel_ratio":1,"using_white_navbar":True,"styles_id":"e6c6f61b7a86cdf3fa2eaaffa982fbd1"},"enable_author_reactions":False,"should_fetch_birthday_avatar_nt_action":False,"sticker_labels_enabled":False,"disable_place_recommendations":True,"enable_user_signals_in_comments":True,"skip_negative_feedback_actions":False,"include_marketplace_ads_fields":False,"stars_comment_card_entry_point":"tap_bling_bar_comment","include_description":False,"is_work_build":False,"filter_comments":True,"msqrd_target_recognition_model_version":1,"angora_attachment_profile_image_size":40,"should_fetch_is_reels_video":False,"fetch_reply_approximate_position":False,"size_style":"contain-fit","include_page_has_taggable_products":False,"should_include_fishbowl_spotlight_comment_button":False,"msqrd_segmentation_model_version":100,"should_fetch_share_count":False,"include_stars_ufi_metadata":False,"profile_image_size":40,"enable_friendship_status_on_actors":True,"media_type":"image/x-auto","max_comment_replies":1,"inspiration_capabilities":[],"include_comment_direct_parent":False,"should_show_awards_attachment_button":False,"reading_attachment_profile_image_width":90,"image_scale":1,"disable_mute_unmute":False,"skip_actor_story_status_fields":True,"comment_privacy_value":[],"enable_reactions_dock_message":True,"hashtag_group_id":None,"should_include_reels_ccp_commenting_disclosure_banner":False,"image_medium_height":2048,"should_fetch_hot_comment":False,"frame_scale":1,"enable_comment_reputation_system_comment_signals":False,"profile_pic_media_type":"image/x-auto","enable_bottomsheet_plugins":False,"subreplies_level_comments_paginating_after_cursor":None,"msqrd_aml_facetracker_model_version":1,"should_fetch_comment_share_context":False,"enable_ranked_replies":True,"should_fetch_playable_duration":False,"should_fetch_ats_nt_view":False,"reply_level_comments_paginating_before_cursor":None,"activity_count":1,"enable_comment_eyebrow":False,"fetch_privacy_value_for_pending_approval_comment":True,"enable_edit_comment_bottomsheet_plugins":False,"num_friend_presence":3,"skip_fetching_video_download_fields":False,"disable_commerce_profile_routing":False,"should_include_stars_education_card":True,"angora_attachment_cover_image_size":480,"enable_comment_identity_badge":True,"enable_hd":True,"enable_civic_comment_composer_hint":False,"thumbnail_width":90,"msqrd_hand_tracking_model_version":3,"enable_post_reputation_system_community_awards":False,"msqrd_xray_model_version":2,"feedback_id":str(base64.b64encode(('feedback:{}'.format(post_id)).encode('utf-8')).decode('utf-8')),"thumbnail_height":120,"enable_rta_inline_composer":False,"comment_order":["ranked_unfiltered"],"should_fetch_sponsored_bumpers":False,"enable_mention_only_neighborhoods_members":True,"disable_author_with_member_profile":False,"load_redundant_fields":True,"image_high_width":540,"defer_story_attachments_subattachments":False,"saved_lists_enabled":False,"remove_feedback_information":False,"should_fetch_ig_backed_page":False,"image_high_height":2048,"should_fetch_is_ig_xar_reels_video":False,"enable_preview_feedback":False,"is_fetching_reply_comment":False,"scale":"1","fetch_available_comment_orderings":True,"disable_inline_follow":False,"disable_story_menu_actions":False,"should_include_fishbowl_comment_component":False,"top_level_comments_paginating_after_cursor":cursor,"image_low_width":180,"disable_pin_unpin":False}
    data  = {'access_token':token,'method':'post','pretty':False,'format':'json','server_timestamps':True,'locale':'user','purpose':'fetch','fb_api_req_friendly_name':'StaticFeedbackBatchAtConnection_At_Connection_Pagination_Feedback_top_level_comments_paginating','fb_api_caller_class':'ConnectionManager','client_doc_id':'34201508066250223569248257643','fb_api_client_context':json.dumps({"load_next_page_counter":1,"client_connection_size":16}),'variables':json.dumps(var),'fb_api_analytics_tags':["At_Connection","GraphServices"],'client_trace_id':str(uuid.uuid4())}
    pos   = r.post('https://graph.facebook.com/graphql', data=data).json()
    try:
        for i in pos['data']['node']['top_level_comments']['edges']:
            try:
                id, name, comment = i['node']['author']['id'], i['node']['author']['name'], i['node']['body']['text']
                print('{}|{}'.format(id, name))
            except Exception: continue
        if pos['data']['node']['top_level_comments']['page_info']['has_next_page']:
            next_cursor = pos['data']['node']['top_level_comments']['page_info']['end_cursor']
            DumpComment(post_id=post_id, token=token, cursor=next_cursor)
    except Exception: print(pos)

post_id = '733442355639178'  #--> Post ID, You Can Scrap In Web "share_fbid":"733442355639178"
token   = 'EAAAAU....'       #--> Access Token (EAAU from b-graph login)

DumpComment(post_id=post_id, token=token)